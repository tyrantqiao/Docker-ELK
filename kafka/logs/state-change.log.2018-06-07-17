[2018-06-07 21:45:48,430] TRACE [Controller id=1 epoch=3] Sending UpdateMetadata request PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=[1, 0, 2], zkVersion=0, replicas=[1, 0, 2], offlineReplicas=[0]) to brokers Set(1, 2) for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:45:48,431] TRACE [Controller id=1 epoch=3] Sending UpdateMetadata request PartitionState(controllerEpoch=1, leader=0, leaderEpoch=0, isr=[0], zkVersion=0, replicas=[0], offlineReplicas=[0]) to brokers Set(1, 2) for partition test-0 (state.change.logger)
[2018-06-07 21:45:48,603] TRACE [Broker id=1] Cached leader info PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=[1, 0, 2], zkVersion=0, replicas=[1, 0, 2], offlineReplicas=[0]) for partition my-replicated-topic-0 in response to UpdateMetadata request sent by controller 1 epoch 3 with correlation id 0 (state.change.logger)
[2018-06-07 21:45:48,603] TRACE [Broker id=1] Cached leader info PartitionState(controllerEpoch=1, leader=0, leaderEpoch=0, isr=[0], zkVersion=0, replicas=[0], offlineReplicas=[0]) for partition test-0 in response to UpdateMetadata request sent by controller 1 epoch 3 with correlation id 0 (state.change.logger)
[2018-06-07 21:45:48,616] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 0 sent to broker localhost:9093 (id: 1 rack: null) (state.change.logger)
[2018-06-07 21:45:48,621] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 0 sent to broker localhost:9094 (id: 2 rack: null) (state.change.logger)
[2018-06-07 21:45:48,641] TRACE [Controller id=1 epoch=3] Changed state of replica 2 for partition my-replicated-topic-0 from OnlineReplica to OnlineReplica (state.change.logger)
[2018-06-07 21:45:48,642] TRACE [Controller id=1 epoch=3] Changed state of replica 1 for partition my-replicated-topic-0 from OnlineReplica to OnlineReplica (state.change.logger)
[2018-06-07 21:45:48,644] TRACE [Controller id=1 epoch=3] Sending become-follower LeaderAndIsr request PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=1,0,2, zkVersion=0, replicas=1,0,2, isNew=false) to broker 2 for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:45:48,648] TRACE [Controller id=1 epoch=3] Sending become-leader LeaderAndIsr request PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=1,0,2, zkVersion=0, replicas=1,0,2, isNew=false) to broker 1 for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:45:48,648] TRACE [Controller id=1 epoch=3] Sending UpdateMetadata request PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=[1, 0, 2], zkVersion=0, replicas=[1, 0, 2], offlineReplicas=[0]) to brokers Set(1, 2) for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:45:48,651] TRACE [Broker id=1] Received LeaderAndIsr request PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=1,0,2, zkVersion=0, replicas=1,0,2, isNew=false) correlation id 1 from controller 1 epoch 3 for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:45:48,661] WARN [Broker id=1] Ignoring LeaderAndIsr request from controller 1 with correlation id 1 epoch 3 for partition my-replicated-topic-0 since its associated leader epoch 0 is not higher than the current leader epoch 0 (state.change.logger)
[2018-06-07 21:45:48,673] TRACE [Controller id=1 epoch=3] Received response {error_code=0,partitions=[{topic=my-replicated-topic,partition=0,error_code=11}]} for request LEADER_AND_ISR with correlation id 1 sent to broker localhost:9094 (id: 2 rack: null) (state.change.logger)
[2018-06-07 21:45:48,678] TRACE [Controller id=1 epoch=3] Received response {error_code=0,partitions=[{topic=my-replicated-topic,partition=0,error_code=11}]} for request LEADER_AND_ISR with correlation id 1 sent to broker localhost:9093 (id: 1 rack: null) (state.change.logger)
[2018-06-07 21:45:48,713] TRACE [Broker id=1] Cached leader info PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=[1, 0, 2], zkVersion=0, replicas=[1, 0, 2], offlineReplicas=[0]) for partition my-replicated-topic-0 in response to UpdateMetadata request sent by controller 1 epoch 3 with correlation id 2 (state.change.logger)
[2018-06-07 21:45:48,716] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 2 sent to broker localhost:9093 (id: 1 rack: null) (state.change.logger)
[2018-06-07 21:45:48,717] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 2 sent to broker localhost:9094 (id: 2 rack: null) (state.change.logger)
[2018-06-07 21:45:48,799] ERROR [Controller id=1 epoch=3] Controller 1 epoch 3 failed to change state for partition test-0 from OfflinePartition to OnlinePartition (state.change.logger)
kafka.common.StateChangeFailedException: Failed to elect leader for partition test-0 under strategy OfflinePartitionLeaderElectionStrategy
	at kafka.controller.PartitionStateMachine.$anonfun$doElectLeaderForPartitions$9(PartitionStateMachine.scala:328)
	at scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:59)
	at scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:52)
	at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:48)
	at kafka.controller.PartitionStateMachine.doElectLeaderForPartitions(PartitionStateMachine.scala:326)
	at kafka.controller.PartitionStateMachine.electLeaderForPartitions(PartitionStateMachine.scala:254)
	at kafka.controller.PartitionStateMachine.doHandleStateChanges(PartitionStateMachine.scala:175)
	at kafka.controller.PartitionStateMachine.handleStateChanges(PartitionStateMachine.scala:116)
	at kafka.controller.PartitionStateMachine.triggerOnlinePartitionStateChange(PartitionStateMachine.scala:106)
	at kafka.controller.PartitionStateMachine.startup(PartitionStateMachine.scala:62)
	at kafka.controller.KafkaController.onControllerFailover(KafkaController.scala:246)
	at kafka.controller.KafkaController.kafka$controller$KafkaController$$elect(KafkaController.scala:1203)
	at kafka.controller.KafkaController$Reelect$.process(KafkaController.scala:1479)
	at kafka.controller.ControllerEventManager$ControllerEventThread.$anonfun$doWork$1(ControllerEventManager.scala:69)
	at scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:12)
	at kafka.metrics.KafkaTimer.time(KafkaTimer.scala:31)
	at kafka.controller.ControllerEventManager$ControllerEventThread.doWork(ControllerEventManager.scala:69)
	at kafka.utils.ShutdownableThread.run(ShutdownableThread.scala:82)
[2018-06-07 21:45:54,309] TRACE [Controller id=1 epoch=3] Sending UpdateMetadata request PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=[1, 2], zkVersion=1, replicas=[1, 0, 2], offlineReplicas=[0]) to brokers Set(1, 2) for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:45:54,312] TRACE [Broker id=1] Cached leader info PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=[1, 2], zkVersion=1, replicas=[1, 0, 2], offlineReplicas=[0]) for partition my-replicated-topic-0 in response to UpdateMetadata request sent by controller 1 epoch 3 with correlation id 3 (state.change.logger)
[2018-06-07 21:45:54,313] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 3 sent to broker localhost:9093 (id: 1 rack: null) (state.change.logger)
[2018-06-07 21:45:54,323] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 3 sent to broker localhost:9094 (id: 2 rack: null) (state.change.logger)
[2018-06-07 21:46:02,097] TRACE [Controller id=1 epoch=3] Sending UpdateMetadata request PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=[1, 2], zkVersion=1, replicas=[1, 0, 2], offlineReplicas=[]) to brokers Set(0, 1, 2) for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:46:02,097] TRACE [Controller id=1 epoch=3] Sending UpdateMetadata request PartitionState(controllerEpoch=1, leader=0, leaderEpoch=0, isr=[0], zkVersion=0, replicas=[0], offlineReplicas=[]) to brokers Set(0, 1, 2) for partition test-0 (state.change.logger)
[2018-06-07 21:46:02,111] TRACE [Broker id=1] Cached leader info PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=[1, 2], zkVersion=1, replicas=[1, 0, 2], offlineReplicas=[]) for partition my-replicated-topic-0 in response to UpdateMetadata request sent by controller 1 epoch 3 with correlation id 4 (state.change.logger)
[2018-06-07 21:46:02,111] TRACE [Broker id=1] Cached leader info PartitionState(controllerEpoch=1, leader=0, leaderEpoch=0, isr=[0], zkVersion=0, replicas=[0], offlineReplicas=[]) for partition test-0 in response to UpdateMetadata request sent by controller 1 epoch 3 with correlation id 4 (state.change.logger)
[2018-06-07 21:46:02,115] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 4 sent to broker localhost:9093 (id: 1 rack: null) (state.change.logger)
[2018-06-07 21:46:02,128] TRACE [Controller id=1 epoch=3] Changed state of replica 0 for partition my-replicated-topic-0 from ReplicaDeletionIneligible to OnlineReplica (state.change.logger)
[2018-06-07 21:46:02,134] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 4 sent to broker localhost:9094 (id: 2 rack: null) (state.change.logger)
[2018-06-07 21:46:02,136] TRACE [Controller id=1 epoch=3] Changed state of replica 0 for partition test-0 from ReplicaDeletionIneligible to OnlineReplica (state.change.logger)
[2018-06-07 21:46:02,136] TRACE [Controller id=1 epoch=3] Sending become-follower LeaderAndIsr request PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=1,2, zkVersion=1, replicas=1,0,2, isNew=false) to broker 0 for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:46:02,137] TRACE [Controller id=1 epoch=3] Sending become-leader LeaderAndIsr request PartitionState(controllerEpoch=1, leader=0, leaderEpoch=0, isr=0, zkVersion=0, replicas=0, isNew=false) to broker 0 for partition test-0 (state.change.logger)
[2018-06-07 21:46:02,138] TRACE [Controller id=1 epoch=3] Sending UpdateMetadata request PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=[1, 2], zkVersion=1, replicas=[1, 0, 2], offlineReplicas=[]) to brokers Set(0, 1, 2) for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:46:02,153] TRACE [Controller id=1 epoch=3] Sending UpdateMetadata request PartitionState(controllerEpoch=1, leader=0, leaderEpoch=0, isr=[0], zkVersion=0, replicas=[0], offlineReplicas=[]) to brokers Set(0, 1, 2) for partition test-0 (state.change.logger)
[2018-06-07 21:46:02,158] TRACE [Broker id=1] Cached leader info PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=[1, 2], zkVersion=1, replicas=[1, 0, 2], offlineReplicas=[]) for partition my-replicated-topic-0 in response to UpdateMetadata request sent by controller 1 epoch 3 with correlation id 5 (state.change.logger)
[2018-06-07 21:46:02,158] TRACE [Broker id=1] Cached leader info PartitionState(controllerEpoch=1, leader=0, leaderEpoch=0, isr=[0], zkVersion=0, replicas=[0], offlineReplicas=[]) for partition test-0 in response to UpdateMetadata request sent by controller 1 epoch 3 with correlation id 5 (state.change.logger)
[2018-06-07 21:46:02,162] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 5 sent to broker localhost:9094 (id: 2 rack: null) (state.change.logger)
[2018-06-07 21:46:02,162] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 5 sent to broker localhost:9093 (id: 1 rack: null) (state.change.logger)
[2018-06-07 21:46:02,189] TRACE [Controller id=1 epoch=3] Changed partition test-0 from OfflinePartition to OnlinePartition with state LeaderAndIsr(leader=0, leaderEpoch=1, isr=List(0), zkVersion=1) (state.change.logger)
[2018-06-07 21:46:02,189] TRACE [Controller id=1 epoch=3] Sending become-leader LeaderAndIsr request PartitionState(controllerEpoch=3, leader=0, leaderEpoch=1, isr=0, zkVersion=1, replicas=0, isNew=false) to broker 0 for partition test-0 (state.change.logger)
[2018-06-07 21:46:02,189] TRACE [Controller id=1 epoch=3] Sending UpdateMetadata request PartitionState(controllerEpoch=3, leader=0, leaderEpoch=1, isr=[0], zkVersion=1, replicas=[0], offlineReplicas=[]) to brokers Set(0, 1, 2) for partition test-0 (state.change.logger)
[2018-06-07 21:46:02,195] TRACE [Broker id=1] Cached leader info PartitionState(controllerEpoch=3, leader=0, leaderEpoch=1, isr=[0], zkVersion=1, replicas=[0], offlineReplicas=[]) for partition test-0 in response to UpdateMetadata request sent by controller 1 epoch 3 with correlation id 6 (state.change.logger)
[2018-06-07 21:46:02,195] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 6 sent to broker localhost:9093 (id: 1 rack: null) (state.change.logger)
[2018-06-07 21:46:02,196] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 6 sent to broker localhost:9094 (id: 2 rack: null) (state.change.logger)
[2018-06-07 21:46:02,599] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 0 sent to broker localhost:9092 (id: 0 rack: null) (state.change.logger)
[2018-06-07 21:46:03,059] TRACE [Controller id=1 epoch=3] Received response {error_code=0,partitions=[{topic=my-replicated-topic,partition=0,error_code=0},{topic=test,partition=0,error_code=0}]} for request LEADER_AND_ISR with correlation id 1 sent to broker localhost:9092 (id: 0 rack: null) (state.change.logger)
[2018-06-07 21:46:03,068] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 2 sent to broker localhost:9092 (id: 0 rack: null) (state.change.logger)
[2018-06-07 21:46:03,118] TRACE [Controller id=1 epoch=3] Received response {error_code=0,partitions=[{topic=test,partition=0,error_code=0}]} for request LEADER_AND_ISR with correlation id 3 sent to broker localhost:9092 (id: 0 rack: null) (state.change.logger)
[2018-06-07 21:46:03,125] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 4 sent to broker localhost:9092 (id: 0 rack: null) (state.change.logger)
[2018-06-07 21:46:09,263] TRACE [Controller id=1 epoch=3] Sending UpdateMetadata request PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=[1, 2, 0], zkVersion=2, replicas=[1, 0, 2], offlineReplicas=[]) to brokers Set(0, 1, 2) for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:46:09,268] TRACE [Broker id=1] Cached leader info PartitionState(controllerEpoch=2, leader=1, leaderEpoch=0, isr=[1, 2, 0], zkVersion=2, replicas=[1, 0, 2], offlineReplicas=[]) for partition my-replicated-topic-0 in response to UpdateMetadata request sent by controller 1 epoch 3 with correlation id 7 (state.change.logger)
[2018-06-07 21:46:09,271] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 7 sent to broker localhost:9093 (id: 1 rack: null) (state.change.logger)
[2018-06-07 21:46:09,271] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 5 sent to broker localhost:9092 (id: 0 rack: null) (state.change.logger)
[2018-06-07 21:46:09,276] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 7 sent to broker localhost:9094 (id: 2 rack: null) (state.change.logger)
[2018-06-07 21:54:28,624] TRACE [Controller id=1 epoch=3] Received response {error_code=0,partitions=[]} for request STOP_REPLICA with correlation id 6 sent to broker localhost:9092 (id: 0 rack: null) (state.change.logger)
[2018-06-07 21:54:28,634] TRACE [Controller id=1 epoch=3] Received response {error_code=0,partitions=[{topic=my-replicated-topic,partition=0,error_code=0}]} for request STOP_REPLICA with correlation id 7 sent to broker localhost:9092 (id: 0 rack: null) (state.change.logger)
[2018-06-07 21:54:28,663] TRACE [Controller id=1 epoch=3] Changed state of replica 0 for partition my-replicated-topic-0 from OnlineReplica to OfflineReplica (state.change.logger)
[2018-06-07 21:54:28,663] TRACE [Controller id=1 epoch=3] Sending become-follower LeaderAndIsr request PartitionState(controllerEpoch=3, leader=1, leaderEpoch=1, isr=1,2, zkVersion=3, replicas=1,0,2, isNew=false) to broker 2 for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:54:28,664] TRACE [Controller id=1 epoch=3] Sending become-leader LeaderAndIsr request PartitionState(controllerEpoch=3, leader=1, leaderEpoch=1, isr=1,2, zkVersion=3, replicas=1,0,2, isNew=false) to broker 1 for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:54:28,666] TRACE [Broker id=1] Received LeaderAndIsr request PartitionState(controllerEpoch=3, leader=1, leaderEpoch=1, isr=1,2, zkVersion=3, replicas=1,0,2, isNew=false) correlation id 8 from controller 1 epoch 3 for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:54:28,667] TRACE [Broker id=1] Handling LeaderAndIsr request correlationId 8 from controller 1 epoch 3 starting the become-leader transition for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:54:28,673] TRACE [Controller id=1 epoch=3] Sending UpdateMetadata request PartitionState(controllerEpoch=3, leader=1, leaderEpoch=1, isr=[1, 2], zkVersion=3, replicas=[1, 0, 2], offlineReplicas=[0]) to brokers Set(0, 1, 2) for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:54:28,678] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 8 sent to broker localhost:9092 (id: 0 rack: null) (state.change.logger)
[2018-06-07 21:54:28,681] TRACE [Controller id=1 epoch=3] Received response {error_code=0,partitions=[]} for request STOP_REPLICA with correlation id 9 sent to broker localhost:9092 (id: 0 rack: null) (state.change.logger)
[2018-06-07 21:54:28,684] TRACE [Controller id=1 epoch=3] Received response {error_code=0,partitions=[{topic=my-replicated-topic,partition=0,error_code=0}]} for request STOP_REPLICA with correlation id 10 sent to broker localhost:9092 (id: 0 rack: null) (state.change.logger)
[2018-06-07 21:54:28,696] INFO [Broker id=1] Skipped the become-leader state change after marking its partition as leader with correlation id 8 from controller 1 epoch 3 for partition my-replicated-topic-0 (last update controller epoch 3) since it is already the leader for the partition. (state.change.logger)
[2018-06-07 21:54:28,696] TRACE [Broker id=1] Completed LeaderAndIsr request correlationId 8 from controller 1 epoch 3 for the become-leader transition for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:54:28,698] TRACE [Controller id=1 epoch=3] Received response {error_code=0,partitions=[{topic=my-replicated-topic,partition=0,error_code=0}]} for request LEADER_AND_ISR with correlation id 8 sent to broker localhost:9093 (id: 1 rack: null) (state.change.logger)
[2018-06-07 21:54:28,699] TRACE [Broker id=1] Cached leader info PartitionState(controllerEpoch=3, leader=1, leaderEpoch=1, isr=[1, 2], zkVersion=3, replicas=[1, 0, 2], offlineReplicas=[0]) for partition my-replicated-topic-0 in response to UpdateMetadata request sent by controller 1 epoch 3 with correlation id 9 (state.change.logger)
[2018-06-07 21:54:28,700] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 9 sent to broker localhost:9093 (id: 1 rack: null) (state.change.logger)
[2018-06-07 21:54:28,769] TRACE [Controller id=1 epoch=3] Received response {error_code=0,partitions=[{topic=my-replicated-topic,partition=0,error_code=0}]} for request LEADER_AND_ISR with correlation id 8 sent to broker localhost:9094 (id: 2 rack: null) (state.change.logger)
[2018-06-07 21:54:28,777] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 9 sent to broker localhost:9094 (id: 2 rack: null) (state.change.logger)
[2018-06-07 21:54:29,773] TRACE [Controller id=1 epoch=3] Changed partition test-0 state from OnlinePartition to OfflinePartition (state.change.logger)
[2018-06-07 21:54:29,778] ERROR [Controller id=1 epoch=3] Controller 1 epoch 3 failed to change state for partition test-0 from OfflinePartition to OnlinePartition (state.change.logger)
kafka.common.StateChangeFailedException: Failed to elect leader for partition test-0 under strategy OfflinePartitionLeaderElectionStrategy
	at kafka.controller.PartitionStateMachine.$anonfun$doElectLeaderForPartitions$9(PartitionStateMachine.scala:328)
	at scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:59)
	at scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:52)
	at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:48)
	at kafka.controller.PartitionStateMachine.doElectLeaderForPartitions(PartitionStateMachine.scala:326)
	at kafka.controller.PartitionStateMachine.electLeaderForPartitions(PartitionStateMachine.scala:254)
	at kafka.controller.PartitionStateMachine.doHandleStateChanges(PartitionStateMachine.scala:175)
	at kafka.controller.PartitionStateMachine.handleStateChanges(PartitionStateMachine.scala:116)
	at kafka.controller.PartitionStateMachine.triggerOnlinePartitionStateChange(PartitionStateMachine.scala:106)
	at kafka.controller.KafkaController.kafka$controller$KafkaController$$onReplicasBecomeOffline(KafkaController.scala:434)
	at kafka.controller.KafkaController.kafka$controller$KafkaController$$onBrokerFailure(KafkaController.scala:402)
	at kafka.controller.KafkaController$BrokerChange$.process(KafkaController.scala:1243)
	at kafka.controller.ControllerEventManager$ControllerEventThread.$anonfun$doWork$1(ControllerEventManager.scala:69)
	at scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:12)
	at kafka.metrics.KafkaTimer.time(KafkaTimer.scala:31)
	at kafka.controller.ControllerEventManager$ControllerEventThread.doWork(ControllerEventManager.scala:69)
	at kafka.utils.ShutdownableThread.run(ShutdownableThread.scala:82)
[2018-06-07 21:54:29,786] TRACE [Controller id=1 epoch=3] Changed state of replica 0 for partition my-replicated-topic-0 from OfflineReplica to OfflineReplica (state.change.logger)
[2018-06-07 21:54:29,786] TRACE [Controller id=1 epoch=3] Changed state of replica 0 for partition test-0 from OnlineReplica to OfflineReplica (state.change.logger)
[2018-06-07 21:54:29,786] TRACE [Controller id=1 epoch=3] Sending become-follower LeaderAndIsr request PartitionState(controllerEpoch=3, leader=1, leaderEpoch=1, isr=1,2, zkVersion=3, replicas=1,0,2, isNew=false) to broker 2 for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:54:29,787] TRACE [Controller id=1 epoch=3] Sending become-leader LeaderAndIsr request PartitionState(controllerEpoch=3, leader=1, leaderEpoch=1, isr=1,2, zkVersion=3, replicas=1,0,2, isNew=false) to broker 1 for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:54:29,787] TRACE [Controller id=1 epoch=3] Sending UpdateMetadata request PartitionState(controllerEpoch=3, leader=1, leaderEpoch=1, isr=[1, 2], zkVersion=3, replicas=[1, 0, 2], offlineReplicas=[0]) to brokers Set(1, 2) for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:54:29,787] TRACE [Controller id=1 epoch=3] Sending UpdateMetadata request PartitionState(controllerEpoch=3, leader=-1, leaderEpoch=2, isr=[0], zkVersion=2, replicas=[0], offlineReplicas=[0]) to brokers Set(1, 2) for partition test-0 (state.change.logger)
[2018-06-07 21:54:29,791] TRACE [Broker id=1] Received LeaderAndIsr request PartitionState(controllerEpoch=3, leader=1, leaderEpoch=1, isr=1,2, zkVersion=3, replicas=1,0,2, isNew=false) correlation id 10 from controller 1 epoch 3 for partition my-replicated-topic-0 (state.change.logger)
[2018-06-07 21:54:29,791] WARN [Broker id=1] Ignoring LeaderAndIsr request from controller 1 with correlation id 10 epoch 3 for partition my-replicated-topic-0 since its associated leader epoch 1 is not higher than the current leader epoch 1 (state.change.logger)
[2018-06-07 21:54:29,794] TRACE [Controller id=1 epoch=3] Received response {error_code=0,partitions=[{topic=my-replicated-topic,partition=0,error_code=11}]} for request LEADER_AND_ISR with correlation id 10 sent to broker localhost:9093 (id: 1 rack: null) (state.change.logger)
[2018-06-07 21:54:29,795] TRACE [Broker id=1] Cached leader info PartitionState(controllerEpoch=3, leader=1, leaderEpoch=1, isr=[1, 2], zkVersion=3, replicas=[1, 0, 2], offlineReplicas=[0]) for partition my-replicated-topic-0 in response to UpdateMetadata request sent by controller 1 epoch 3 with correlation id 11 (state.change.logger)
[2018-06-07 21:54:29,795] TRACE [Broker id=1] Cached leader info PartitionState(controllerEpoch=3, leader=-1, leaderEpoch=2, isr=[0], zkVersion=2, replicas=[0], offlineReplicas=[0]) for partition test-0 in response to UpdateMetadata request sent by controller 1 epoch 3 with correlation id 11 (state.change.logger)
[2018-06-07 21:54:29,796] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 11 sent to broker localhost:9093 (id: 1 rack: null) (state.change.logger)
[2018-06-07 21:54:29,798] TRACE [Controller id=1 epoch=3] Received response {error_code=0,partitions=[{topic=my-replicated-topic,partition=0,error_code=11}]} for request LEADER_AND_ISR with correlation id 10 sent to broker localhost:9094 (id: 2 rack: null) (state.change.logger)
[2018-06-07 21:54:29,802] TRACE [Controller id=1 epoch=3] Received response {error_code=0} for request UPDATE_METADATA with correlation id 11 sent to broker localhost:9094 (id: 2 rack: null) (state.change.logger)
