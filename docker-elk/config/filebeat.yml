#=========================== Filebeat inputs =============================
filebeat.inputs:
- type: log
  enabled: false
  paths:
    - /home/tinker/docker/cmt-server/archivecenter/logs/cmt/*.log 
  fields:
    log_topics: archivecenter
- type: log
  enabled: false
  paths:
    - /home/tinker/docker/cmt-server/casecenter/logs/cmt/*.log
  fields:
    log_topics: casecenter
- type: log
  enabled: false
  paths:
    - /home/tinker/docker/cmt-server/eureka/logs/cmt/*.log
  fields:
    log_topics: eureka
- type: log
  enabled: false
  paths:
    - /home/tinker/docker/cmt-server/faceapi/logs/cmt/*.log
  fields:
    log_topics: faceapi
- type: log
  enabled: false
  paths:
    - /home/tinker/docker/cmt-server/im/logs/im/*.log
  fields:
    log_topics: im
- type: log
  enabled: false
  paths:
    - /home/tinker/docker/cmt-server/interrogate/logs/cmt/*.log
  fields:
    log_topics: interrogate
- type: log
  enabled: false
  paths:
    - /home/tinker/docker/cmt-server/permission/logs/cmt/*.log
  fields:
    log_topics: permission
- type: log
  enabled: false
  paths:
    - /home/tinker/docker/cmt-server/thirdapi/logs/cmt/*.log
  fields:
    log_topics: thirdapi
- type: log
  enabled: true
  paths:
    - /home/elk/logs/huadu/cmt-logs/*.log
    #- /home/elk/logs/huadu/*/*/*.log
  fields:
    log_topics: huadu
  #include_lines: ['ERROR']
  multiline:
    pattern: '^[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}'
    negate: true
    match: after 
    #after连到上一次；before往下连
    #max_lines: 1000
    #timeout: 30s
  #fields_under_root: true 
  #使field变为顶级字段
#============================ kafka output ===============================
output.kafka:
  enabled: true
  hosts: ["172.16.11.119:9092"]
  worker: 5
  
  topic: '%{[fields][log_topics]}'
  partition.round_robin:
    reachable_only: false
  required_acks: 1
  compression: gzip
  max_message_bytes: 1000000
